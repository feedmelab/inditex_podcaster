{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link,useLocation,useNavigate,useParams}from\"react-router-dom\";import{fetchPodcastDetails}from\"../../features/podcast/podcastSlice\";import moment from\"moment\";import{BarraEpisodios,BarraLateral,ListEpisodios,WrapperColumn,WrapperDetails}from\"./PodcastDetail.styles\";import{PodcastContainer}from\"../PodcastList/PodcastList.styles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PodcastDetail=function PodcastDetail(){var _location$state,_podcastDetails$2,_podcastDetails$3,_podcastDetails$4;var dispatch=useDispatch();var location=useLocation();var navigate=useNavigate();var _ref=(_location$state=location.state)!==null&&_location$state!==void 0?_location$state:{},summary=_ref.summary;var _useParams=useParams(),podcastId=_useParams.podcastId;var _useSelector=useSelector(function(state){var _state$podcast;return(_state$podcast=state.podcast)!==null&&_state$podcast!==void 0?_state$podcast:{podcasts:[],podcastDetails:null,isFetchingDetails:false};}),podcastDetails=_useSelector.podcastDetails,isFetchingDetails=_useSelector.isFetchingDetails;useEffect(function(){dispatch(fetchPodcastDetails(podcastId));},[dispatch,podcastId]);var updatedResults=podcastDetails===null||podcastDetails===void 0?void 0:podcastDetails.filter(function(_,index){return index!==0;});var handleEpisodeClick=function handleEpisodeClick(podcastId,episodeId){var _podcastDetails$;var selectedEpisode=updatedResults.find(function(episode){return episode.trackId===episodeId;});navigate(\"/podcast/\".concat(podcastId,\"/episode/\").concat(episodeId),{state:{summary:summary,artistName:(_podcastDetails$=podcastDetails[0])===null||_podcastDetails$===void 0?void 0:_podcastDetails$.artistName,podcastDetails:[selectedEpisode]}});};if(!podcastDetails||isFetchingDetails){return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"podcast-item\",children:/*#__PURE__*/_jsx(PodcastContainer,{children:/*#__PURE__*/_jsx(\"p\",{children:\"Descargando listado de episodios, por favor espere...\"})})});}return/*#__PURE__*/_jsxs(WrapperDetails,{className:\"container\",children:[/*#__PURE__*/_jsxs(BarraLateral,{className:\"card\",children:[/*#__PURE__*/_jsxs(Link,{to:\"..\",onClick:function onClick(e){e.preventDefault();navigate(-1);},children:[\" \",/*#__PURE__*/_jsx(\"img\",{className:\"grow-effect\",src:(_podcastDetails$2=podcastDetails[0])===null||_podcastDetails$2===void 0?void 0:_podcastDetails$2.artworkUrl600,alt:podcastDetails[0].collectionName,onError:function onError(e){e.target.src=\"/img/404.jpeg\";}})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(Link,{\"data-testid\":\"link-back\",to:\"..\",onClick:function onClick(e){e.preventDefault();navigate(-1);},children:(_podcastDetails$3=podcastDetails[0])===null||_podcastDetails$3===void 0?void 0:_podcastDetails$3.collectionName})}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"by \",(_podcastDetails$4=podcastDetails[0])===null||_podcastDetails$4===void 0?void 0:_podcastDetails$4.artistName]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:summary})})]}),/*#__PURE__*/_jsxs(WrapperColumn,{children:[/*#__PURE__*/_jsx(BarraEpisodios,{className:\"card\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Episodes: \",podcastDetails.length-1]})}),/*#__PURE__*/_jsx(ListEpisodios,{className:\"card\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Duration\"})]})}),updatedResults===null||updatedResults===void 0?void 0:updatedResults.map(function(episode,index){var duration=moment.duration(episode.trackTimeMillis);var formattedTime=moment.utc(duration.as(\"milliseconds\")).format(\"HH:mm\");return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return handleEpisodeClick(podcastId,episode.trackId);},children:episode===null||episode===void 0?void 0:episode.trackName})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(episode.releaseDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:formattedTime})]})},index);})]})})]})]});};export default PodcastDetail;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","useLocation","useNavigate","useParams","fetchPodcastDetails","moment","BarraEpisodios","BarraLateral","ListEpisodios","WrapperColumn","WrapperDetails","PodcastContainer","jsx","_jsx","jsxs","_jsxs","PodcastDetail","_location$state","_podcastDetails$2","_podcastDetails$3","_podcastDetails$4","dispatch","location","navigate","_ref","state","summary","_useParams","podcastId","_useSelector","_state$podcast","podcast","podcasts","podcastDetails","isFetchingDetails","updatedResults","filter","_","index","handleEpisodeClick","episodeId","_podcastDetails$","selectedEpisode","find","episode","trackId","concat","artistName","children","className","to","onClick","e","preventDefault","src","artworkUrl600","alt","collectionName","onError","target","length","map","duration","trackTimeMillis","formattedTime","utc","as","format","trackName","Date","releaseDate","toLocaleDateString"],"sources":["/Users/xavitorner/Downloads/inditex_podcaster/src/components/PodcastDetail/PodcastDetail.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { fetchPodcastDetails } from \"../../features/podcast/podcastSlice\";\nimport moment from \"moment\";\n\nimport {\n  BarraEpisodios,\n  BarraLateral,\n  ListEpisodios,\n  WrapperColumn,\n  WrapperDetails,\n} from \"./PodcastDetail.styles\";\nimport { PodcastContainer } from \"../PodcastList/PodcastList.styles\";\n\nconst PodcastDetail = () => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { summary } = location.state ?? {};\n  const { podcastId } = useParams();\n\n  const { podcastDetails, isFetchingDetails } = useSelector(\n    (state) =>\n      state.podcast ?? {\n        podcasts: [],\n        podcastDetails: null,\n        isFetchingDetails: false,\n      }\n  );\n\n  useEffect(() => {\n    dispatch(fetchPodcastDetails(podcastId));\n  }, [dispatch, podcastId]);\n\n  const updatedResults = podcastDetails?.filter((_, index) => index !== 0);\n\n  const handleEpisodeClick = (podcastId, episodeId) => {\n    const selectedEpisode = updatedResults.find(\n      (episode) => episode.trackId === episodeId\n    );\n    navigate(`/podcast/${podcastId}/episode/${episodeId}`, {\n      state: {\n        summary,\n        artistName: podcastDetails[0]?.artistName,\n        podcastDetails: [selectedEpisode],\n      },\n    });\n  };\n\n  if (!podcastDetails || isFetchingDetails) {\n    return (\n      <div data-testid='podcast-item'>\n        <PodcastContainer>\n          <p>Descargando listado de episodios, por favor espere...</p>\n        </PodcastContainer>\n      </div>\n    );\n  }\n\n  return (\n    <WrapperDetails className='container'>\n      <BarraLateral className='card'>\n        <Link\n          to={\"..\"}\n          onClick={(e) => {\n            e.preventDefault();\n            navigate(-1);\n          }}\n        >\n          {\" \"}\n          <img\n            className='grow-effect'\n            src={podcastDetails[0]?.artworkUrl600}\n            alt={podcastDetails[0].collectionName}\n            onError={(e) => {\n              e.target.src = \"/img/404.jpeg\";\n            }}\n          />\n        </Link>\n        <hr />\n        <h2>\n          <Link\n            data-testid='link-back'\n            to={\"..\"}\n            onClick={(e) => {\n              e.preventDefault();\n              navigate(-1);\n            }}\n          >\n            {podcastDetails[0]?.collectionName}\n          </Link>\n        </h2>\n        <h3>by {podcastDetails[0]?.artistName}</h3>\n        <hr />\n        <h4>Description:</h4>\n        <div>\n          <p>{summary}</p>\n        </div>\n      </BarraLateral>\n      <WrapperColumn>\n        <BarraEpisodios className='card'>\n          <span>Episodes: {podcastDetails.length - 1}</span>\n        </BarraEpisodios>\n        <ListEpisodios className='card'>\n          <table>\n            <thead>\n              <tr>\n                <th>Title</th>\n                <th>Date</th>\n                <th>Duration</th>\n              </tr>\n            </thead>\n\n            {updatedResults?.map((episode, index) => {\n              const duration = moment.duration(episode.trackTimeMillis);\n              const formattedTime = moment\n                .utc(duration.as(\"milliseconds\"))\n                .format(\"HH:mm\");\n\n              return (\n                <tbody key={index}>\n                  <tr>\n                    <td>\n                      <span\n                        onClick={() =>\n                          handleEpisodeClick(podcastId, episode.trackId)\n                        }\n                      >\n                        {episode?.trackName}\n                      </span>\n                    </td>\n                    <td>\n                      {new Date(episode.releaseDate).toLocaleDateString()}\n                    </td>\n                    <td>{formattedTime}</td>\n                  </tr>\n                </tbody>\n              );\n            })}\n          </table>\n        </ListEpisodios>\n      </WrapperColumn>\n    </WrapperDetails>\n  );\n};\n\nexport default PodcastDetail;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,IAAI,CAAEC,WAAW,CAAEC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CAC5E,OAASC,mBAAmB,KAAQ,qCAAqC,CACzE,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAE3B,OACEC,cAAc,CACdC,YAAY,CACZC,aAAa,CACbC,aAAa,CACbC,cAAc,KACT,wBAAwB,CAC/B,OAASC,gBAAgB,KAAQ,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErE,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,KAAAC,eAAA,CAAAC,iBAAA,CAAAC,iBAAA,CAAAC,iBAAA,CAC1B,GAAM,CAAAC,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAwB,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAsB,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAC9B,IAAAsB,IAAA,EAAAP,eAAA,CAAoBK,QAAQ,CAACG,KAAK,UAAAR,eAAA,UAAAA,eAAA,CAAI,CAAC,CAAC,CAAhCS,OAAO,CAAAF,IAAA,CAAPE,OAAO,CACf,IAAAC,UAAA,CAAsBxB,SAAS,CAAC,CAAC,CAAzByB,SAAS,CAAAD,UAAA,CAATC,SAAS,CAEjB,IAAAC,YAAA,CAA8C9B,WAAW,CACvD,SAAC0B,KAAK,MAAAK,cAAA,QAAAA,cAAA,CACJL,KAAK,CAACM,OAAO,UAAAD,cAAA,UAAAA,cAAA,CAAI,CACfE,QAAQ,CAAE,EAAE,CACZC,cAAc,CAAE,IAAI,CACpBC,iBAAiB,CAAE,KACrB,CAAC,EACL,CAAC,CAPOD,cAAc,CAAAJ,YAAA,CAAdI,cAAc,CAAEC,iBAAiB,CAAAL,YAAA,CAAjBK,iBAAiB,CASzCrC,SAAS,CAAC,UAAM,CACdwB,QAAQ,CAACjB,mBAAmB,CAACwB,SAAS,CAAC,CAAC,CAC1C,CAAC,CAAE,CAACP,QAAQ,CAAEO,SAAS,CAAC,CAAC,CAEzB,GAAM,CAAAO,cAAc,CAAGF,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAEG,MAAM,CAAC,SAACC,CAAC,CAAEC,KAAK,QAAK,CAAAA,KAAK,GAAK,CAAC,GAAC,CAExE,GAAM,CAAAC,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAIX,SAAS,CAAEY,SAAS,CAAK,KAAAC,gBAAA,CACnD,GAAM,CAAAC,eAAe,CAAGP,cAAc,CAACQ,IAAI,CACzC,SAACC,OAAO,QAAK,CAAAA,OAAO,CAACC,OAAO,GAAKL,SAAS,EAC5C,CAAC,CACDjB,QAAQ,aAAAuB,MAAA,CAAalB,SAAS,cAAAkB,MAAA,CAAYN,SAAS,EAAI,CACrDf,KAAK,CAAE,CACLC,OAAO,CAAPA,OAAO,CACPqB,UAAU,EAAAN,gBAAA,CAAER,cAAc,CAAC,CAAC,CAAC,UAAAQ,gBAAA,iBAAjBA,gBAAA,CAAmBM,UAAU,CACzCd,cAAc,CAAE,CAACS,eAAe,CAClC,CACF,CAAC,CAAC,CACJ,CAAC,CAED,GAAI,CAACT,cAAc,EAAIC,iBAAiB,CAAE,CACxC,mBACErB,IAAA,QAAK,cAAY,cAAc,CAAAmC,QAAA,cAC7BnC,IAAA,CAACF,gBAAgB,EAAAqC,QAAA,cACfnC,IAAA,MAAAmC,QAAA,CAAG,uDAAqD,CAAG,CAAC,CAC5C,CAAC,CAChB,CAAC,CAEV,CAEA,mBACEjC,KAAA,CAACL,cAAc,EAACuC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACnCjC,KAAA,CAACR,YAAY,EAAC0C,SAAS,CAAC,MAAM,CAAAD,QAAA,eAC5BjC,KAAA,CAACf,IAAI,EACHkD,EAAE,CAAE,IAAK,CACTC,OAAO,CAAE,SAAAA,QAACC,CAAC,CAAK,CACdA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB9B,QAAQ,CAAC,CAAC,CAAC,CAAC,CACd,CAAE,CAAAyB,QAAA,EAED,GAAG,cACJnC,IAAA,QACEoC,SAAS,CAAC,aAAa,CACvBK,GAAG,EAAApC,iBAAA,CAAEe,cAAc,CAAC,CAAC,CAAC,UAAAf,iBAAA,iBAAjBA,iBAAA,CAAmBqC,aAAc,CACtCC,GAAG,CAAEvB,cAAc,CAAC,CAAC,CAAC,CAACwB,cAAe,CACtCC,OAAO,CAAE,SAAAA,QAACN,CAAC,CAAK,CACdA,CAAC,CAACO,MAAM,CAACL,GAAG,CAAG,eAAe,CAChC,CAAE,CACH,CAAC,EACE,CAAC,cACPzC,IAAA,QAAK,CAAC,cACNA,IAAA,OAAAmC,QAAA,cACEnC,IAAA,CAACb,IAAI,EACH,cAAY,WAAW,CACvBkD,EAAE,CAAE,IAAK,CACTC,OAAO,CAAE,SAAAA,QAACC,CAAC,CAAK,CACdA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB9B,QAAQ,CAAC,CAAC,CAAC,CAAC,CACd,CAAE,CAAAyB,QAAA,EAAA7B,iBAAA,CAEDc,cAAc,CAAC,CAAC,CAAC,UAAAd,iBAAA,iBAAjBA,iBAAA,CAAmBsC,cAAc,CAC9B,CAAC,CACL,CAAC,cACL1C,KAAA,OAAAiC,QAAA,EAAI,KAAG,EAAA5B,iBAAA,CAACa,cAAc,CAAC,CAAC,CAAC,UAAAb,iBAAA,iBAAjBA,iBAAA,CAAmB2B,UAAU,EAAK,CAAC,cAC3ClC,IAAA,QAAK,CAAC,cACNA,IAAA,OAAAmC,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBnC,IAAA,QAAAmC,QAAA,cACEnC,IAAA,MAAAmC,QAAA,CAAItB,OAAO,CAAI,CAAC,CACb,CAAC,EACM,CAAC,cACfX,KAAA,CAACN,aAAa,EAAAuC,QAAA,eACZnC,IAAA,CAACP,cAAc,EAAC2C,SAAS,CAAC,MAAM,CAAAD,QAAA,cAC9BjC,KAAA,SAAAiC,QAAA,EAAM,YAAU,CAACf,cAAc,CAAC2B,MAAM,CAAG,CAAC,EAAO,CAAC,CACpC,CAAC,cACjB/C,IAAA,CAACL,aAAa,EAACyC,SAAS,CAAC,MAAM,CAAAD,QAAA,cAC7BjC,KAAA,UAAAiC,QAAA,eACEnC,IAAA,UAAAmC,QAAA,cACEjC,KAAA,OAAAiC,QAAA,eACEnC,IAAA,OAAAmC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdnC,IAAA,OAAAmC,QAAA,CAAI,MAAI,CAAI,CAAC,cACbnC,IAAA,OAAAmC,QAAA,CAAI,UAAQ,CAAI,CAAC,EACf,CAAC,CACA,CAAC,CAEPb,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAE0B,GAAG,CAAC,SAACjB,OAAO,CAAEN,KAAK,CAAK,CACvC,GAAM,CAAAwB,QAAQ,CAAGzD,MAAM,CAACyD,QAAQ,CAAClB,OAAO,CAACmB,eAAe,CAAC,CACzD,GAAM,CAAAC,aAAa,CAAG3D,MAAM,CACzB4D,GAAG,CAACH,QAAQ,CAACI,EAAE,CAAC,cAAc,CAAC,CAAC,CAChCC,MAAM,CAAC,OAAO,CAAC,CAElB,mBACEtD,IAAA,UAAAmC,QAAA,cACEjC,KAAA,OAAAiC,QAAA,eACEnC,IAAA,OAAAmC,QAAA,cACEnC,IAAA,SACEsC,OAAO,CAAE,SAAAA,QAAA,QACP,CAAAZ,kBAAkB,CAACX,SAAS,CAAEgB,OAAO,CAACC,OAAO,CAAC,EAC/C,CAAAG,QAAA,CAEAJ,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEwB,SAAS,CACf,CAAC,CACL,CAAC,cACLvD,IAAA,OAAAmC,QAAA,CACG,GAAI,CAAAqB,IAAI,CAACzB,OAAO,CAAC0B,WAAW,CAAC,CAACC,kBAAkB,CAAC,CAAC,CACjD,CAAC,cACL1D,IAAA,OAAAmC,QAAA,CAAKgB,aAAa,CAAK,CAAC,EACtB,CAAC,EAfK1B,KAgBL,CAAC,CAEZ,CAAC,CAAC,EACG,CAAC,CACK,CAAC,EACH,CAAC,EACF,CAAC,CAErB,CAAC,CAED,cAAe,CAAAtB,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}